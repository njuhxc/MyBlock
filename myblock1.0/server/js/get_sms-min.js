function GetSms(){}GetSms.prototype.checkCode=function(a,b){$.ajax({url:"http://my.leju.com/settings/findpwd/checkimagecode?imageCode="+encodeURIComponent(a),type:"GET",dataType:"jsonp",success:function(c){b&&b(c)}})};GetSms.prototype.isVerifyCode=function(a){$.ajax({url:"http://www.7gz.com/Api/Login/isVerifyCode",type:"GET",dataType:"jsonp",success:function(b){a&&a(b)}})};GetSms.prototype.enCodeMobile=function(a,b){$.ajax({url:"http://www.7gz.com/Sso/dataEncode?data="+a+"&callback=?",type:"GET",dataType:"jsonp",success:function(c){b&&b(c)}})};GetSms.prototype.RandomImg=function(){return"http://www.7gz.com/Api/Login/showVerifyCode?r="+new Date().getTime()};GetSms.prototype.getMobileCode=function(c,b,d){var a="http://www.7gz.com/Api/Login/SendSmsCode?mobile="+c+"&codetype=0&verify_code="+b+"&callback=?";if(b.trim()==""){a="http://www.7gz.com/Api/Login/SendSmsCode?mobile="+c+"&codetype=0&callback=?"}$.ajax({url:a,type:"GET",dataType:"jsonp",success:function(e){d&&d(e)}})};GetSms.prototype.doLogin=function(b,d,e,f,a){var c=this;$.ajax({url:"http://www.7gz.com/Api/Login/checkMCode?mobile="+e+"&code="+d+"&callback=?",type:"GET",dataType:"jsonp",success:function(g){if(g.errCode==1000){c.login(b,d,e,f,a,c)}else{a&&a()}}})};GetSms.prototype.login=function(phone,code,encodeMob,callback,errCallback,that){that.enCodeMobile("7gz.com",function(data){$.ajax({url:"http://my.leju.com/web/sso/ssoLogin?key="+data+"&code="+code+"&mobile="+encodeMob+"&check_image=0&callback=?",type:"GET",dataType:"jsonp",success:function(data){if(data.code!=0){errCallback&&errCallback(data)}else{$.getScript("http://cdn.leju.com/sso/sso.js",function(){var sooFn=lj_sso();sooFn.isLogin(function(status,data){if(status){var info=eval("("+that.getCookie("M_INFO")+")");var name=info.phone.length==0?info.username:info.phone;var re=/^(\d{3})(\d{4})(\d{4})$/;var mobileRe=phone.replace(re,function($1,$2,$3,$4){return $2+"****"+$4});var mobile=mobileRe==info.phone?"":encodeMob;$.ajax({url:"http://www.7gz.com/Api/Login/doLogin?callback=?",type:"GET",data:{mobile:mobile},dataType:"jsonp",success:function(data){callback&&callback(data)},error:function(data){console.log(data);callback&&callback(data)}})}else{errCallback&&errCallback()}})})}}})})};GetSms.prototype.getCookie=function(b){var d=document.cookie;var e=d.split("; ");for(var c=0;c<e.length;c++){var a=e[c].split("=");if(a[0]==b){return unescape(a[1])}}return""};